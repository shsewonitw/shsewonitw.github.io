---
layout: post
title: "[Daily morning study] DNS의 작동 원리 (Recursive vs. Iterative Query)"
description: >
  #daily morning study
category: 
    - dms
    - -network
hide_last_modified: true
---

![Image](https://github.com/user-attachments/assets/1b38c764-1122-4c72-8acb-ac3a67750ee9)

---
# DNS의 작동 원리 (Recursive vs. Iterative Query)

도메인 네임 시스템(DNS)은 도메인 이름을 IP 주소로 변환해주는 시스템이다. 이를 통해 사용자는 웹사이트에 접속할 때 복잡한 숫자 대신 쉽게 기억할 수 있는 도메인 이름을 사용할 수 있다. DNS의 작동 방식에는 두 가지 주요 쿼리 방식이 있다: 재귀 쿼리(Recursive Query)와 반복 쿼리(Iterative Query). 이 문서에서는 이 두 가지 쿼리 방식을 살펴보겠다.

## 1. DNS 기본 개념

DNS의 기본 구조는 다음과 같다:

- **네임서버(Network Server)**: 도메인 이름에 대한 정보를 저장하고 있는 서버
- **레코드(Record)**: 도메인 이름과 IP 주소를 연결하는 데이터
- **도메인 네임(Domain Name)**: 웹사이트 주소

### DNS 쿼리의 흐름

1. 사용자가 웹사이트 URL을 입력
2. 브라우저가 DNS 서버에 도메인 이름에 대한 요청
3. DNS 서버가 요청받은 도메인 이름의 IP 주소를 반환

## 2. 재귀 쿼리 (Recursive Query)

### 재귀 쿼리의 작동 방식

재귀 쿼리는 DNS 클라이언트(일반적으로 사용자 PC)가 DNS 서버에 요청을 보내고, 해당 DNS 서버가 요청을 처리하는 방식이다. 클라이언트는 DNS 서버에 쿼리를 보내고, 서버는 클라이언트를 대신하여 필요한 모든 네임서버에 쿼리를 수행한다.

1. 사용자가 웹사이트 URL을 입력하고 DNS 클라이언트가 DNS 서버에 요청
2. DNS 서버가 해당 도메인의 IP 주소를 찾기 위해 다른 네임서버에 요청
3. 네임서버가 IP 주소를 찾아 DNS 서버에 반환
4. DNS 서버가 최종적으로 IP 주소를 클라이언트에게 반환

### 장점과 단점

**장점**
- 클라이언트는 복잡한 쿼리를 처리할 필요가 없어 단순하다.

**단점**
- DNS 서버의 부하가 증가할 수 있다.
- DNS 서버가 만약 중단되면 모든 요청 처리에 문제가 발생한다.

## 3. 반복 쿼리 (Iterative Query)

### 반복 쿼리의 작동 방식

반복 쿼리는 DNS 클라이언트가 DNS 서버에 요청을 하고, 서버가 가장 잘 알고 있는 정보를 제공하는 방식이다. 클라이언트가 여전히 다른 네임서버에 직접 요청을 해야 한다.

1. 클라이언트가 웹사이트 URL을 입력하고 DNS 서버에 요청
2. DNS 서버가 알고 있는 최상위 도메인 네임서버의 주소를 반환
3. 클라이언트가 해당 최상위 도메인 서버에 직접 요청
4. 최상위 도메인 서버가 다음 네임서버의 정보를 반환
5. 이 과정을 반복하여 최종 IP 주소를 찾는다.

### 장점과 단점

**장점**
- DNS 서버의 부담을 줄일 수 있다.
- 각 네임서버에 대한 요청이 분산되어 더 빠른 응답성을 제공할 수 있다.

**단점**
- 클라이언트가 각 단계에 대해 별도의 요청을 처리해야 하므로 복잡하다.
- 네트워크 지연(latency)이 발생할 수 있다.

## 4. 비교 요약

| 특징                | 재귀 쿼리                     | 반복 쿼리                   |
|---------------------|-------------------------------|-----------------------------|
| 쿼리 처리          | DNS 서버가 모든 요청 처리    | 클라이언트가 직접 처리     |
| 네트워크 부담      | DNS 서버에 부담 증가         | 클라이언트에 부담 증가     |
| 속도               | 처리 후 하나의 응답          | 여러 응답 단계를 거침      |
| 구현 용이성        | 클라이언트 입장에서 단순함   | 클라이언트 구현 복잡함     |

## 5. 결론

DNS는 인터넷의 중요한 기본 요소로, 도메인 이름을 IP 주소로 변환하여 웹사이트에 접속할 수 있게 해준다. 재귀 쿼리와 반복 쿼리 방식 각각은 장단점이 있으며, 사용자의 필요에 따라 적절한 방식을 선택해야 한다. 

오늘 학습한 내용을 기반으로 DNS의 동작 방식을 더 깊이 있게 이해하고 필요할 때 활용할 수 있길 바란다.
