---
layout: post
title: "[Daily morning study] 로드 밸런서(Load Balancer)의 종류와 작동 방식 (L4 vs. L7)"
description: >
  #daily morning study
category: 
    - dms
    - -cloud
hide_last_modified: true
---

![Image](https://github.com/user-attachments/assets/1b38c764-1122-4c72-8acb-ac3a67750ee9)

---
# 로드 밸런서(Load Balancer)의 종류와 작동 방식 (L4 vs. L7)

로드 밸런서는 배포된 서버들 간에 트래픽을 효율적으로 분산시켜 시스템의 가용성과 성능을 향상시키는 기술입니다. 로드 밸런서는 주로 두 가지 레벨에서 작동하는데, L4(전송 계층)와 L7(애플리케이션 계층)로 나뉩니다. 각 종류의 로드 밸런서에 대해서 자세히 살펴보겠습니다.

## 1. 로드 밸런서의 기본 개념

로드 밸런서의 주요 역할은 클라이언트의 요청을 여러 서버에 분산시키는 것입니다. 이를 통해 각 서버의 부하를 줄이고 더 많은 트래픽을 처리할 수 있도록 합니다. 다음은 로드 밸런싱의 주요 이점입니다:

- **고가용성**: 특정 서버가 다운되더라도 다른 서버에 요청을 분산시켜 서비스 연속성을 유지합니다.
- **확장성**: 트래픽이 증가할 경우, 서버를 추가하여 쉽게 확장할 수 있습니다.
- **성능 향상**: 서버 간의 부하 분산을 통해 응답 시간을 줄이고 더 많은 요청을 처리할 수 있습니다.

## 2. L4 로드 밸런서

L4 로드 밸런서는 전송 계층에서 작동하며, TCP 및 UDP 트래픽을 처리합니다. 이 방식은 클라이언트와 서버 간의 연결을 이해하고, 연결의 기본 속성을 바탕으로 트래픽을 분산합니다.

### 작동 방식

- **전송 계층의 라우팅**: L4 로드 밸런서는 IP 주소와 포트 정보를 기반으로 요청을 라우팅합니다. 클라이언트의 요청이 L4 로드 밸런서에 도착하면, 로드 밸런서는 접속 요청을 각각의 서버로 전달합니다.
- **세션 지속성**: 이 기능을 통해 사용자의 요청이 항상 동일한 서버로 전달될 수 있도록 합니다. 이는 동일한 사용자의 요청이 같은 서버에서 처리되도록 보장합니다.

### 장점

- **고속 성능**: L4 로드 밸런서는 최소한의 오버헤드로 트래픽을 처리하므로 빠른 성능을 자랑합니다.
- **다양한 프로토콜 지원**: TCP, UDP 등 다양한 전송 프로토콜을 지원합니다.

### 단점

- **제한된 정보 처리**: L4 로드 밸런서는 애플리케이션 데이터에 대한 이해가 없으므로 깊은 트래픽 분석이 어렵습니다.

## 3. L7 로드 밸런서

L7 로드 밸런서는 애플리케이션 계층에서 작동하며, HTTP, HTTPS 및 FTP 트래픽을 처리할 수 있습니다. 이 방식은 더 많은 트래픽 관리 기능을 제공합니다.

### 작동 방식

- **애플리케이션 레벨의 라우팅**: L7 로드 밸런서는 요청의 URL, 헤더 내용, 쿠키 등을 분석하여 요청을 분산합니다. 이를 통해 사용자가 원하는 페이지나 서비스에 따라 적절한 서버로 요청을 전달할 수 있습니다.
- **고급 트래픽 관리**: L7 로드 밸런서는 SSL 종료, URL 리다이렉션 및 HTTP 압축 등 다양한 기능을 지원합니다. 

### 장점

- **정교한 트래픽 관리**: 요청의 내용을 기반으로 복잡한 라우팅 및 정책을 적용할 수 있습니다.
- **세큐리티 기능**: SSL 종료 및 Web Application Firewall(WAF) 통합을 통해 보안 기능을 강화할 수 있습니다.

### 단점

- **처리 지연**: L7 로드 밸런서는 더 많은 정보를 처리하므로 L4보다 성능 오버헤드가 발생할 수 있습니다.

## 4. L4와 L7 비교

아래 표는 L4와 L7 로드 밸런서의 주요 차이점을 정리한 것입니다.

| 특성              | L4 로드 밸런서          | L7 로드 밸런서          |
|------------------|-------------------------|-------------------------|
| 운영 계층        | 전송 계층 (Layer 4)    | 애플리케이션 계층 (Layer 7) |
| 프로토콜 지원     | TCP, UDP                | HTTP, HTTPS, FTP        |
| 트래픽 이해 수준 | 기본적인 IP 및 포트 정보 | 요청 헤더, URL, 쿠키 등을 분석 |
| 성능             | 빠름                   | 상대적으로 느림        |
| 특징             | 세션 지속성 지원       | 고급 라우팅 및 보안 기능 |

## 5. 결론

L4와 L7 로드 밸런서는 각기 다른 요구 사항에 맞춰 다르게 작동합니다. 시스템의 요구 사항과 아키텍처에 따라 적절한 유형의 로드 밸런서를 선택하는 것이 중요합니다. L4 로드 밸런서는 고속 성능과 다양한 프로토콜 지원이 필요할 때 유리하며, L7 로드 밸런서는 고급 트래픽 관리와 보안 기능이 중요할 때 적합합니다.

로드 밸런서를 올바르게 이해하고 적절히 활용하면 서비스를 더욱 효율적으로 운영할 수 있습니다.
